(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,a){e.exports=a(43)},28:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(20),l=a.n(s),o=(a(28),a(3)),c=a(4),i=a(6),u=a(5),p=a(7),m=a(2),h=(a(29),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"searchBar"},r.a.createElement("form",{onSubmit:this.props.onSubmitHandlerProps},r.a.createElement("label",null,"Search HDB Parking Availablity"),r.a.createElement("br",null),r.a.createElement("input",{placeholder:"Type in street name",value:this.props.searchInputProps,onChange:this.props.onChangeHandlerProps}),r.a.createElement("button",null,"Search"))))}}]),t}(r.a.Component)),d=a(13),g=(a(30),function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("header",null,r.a.createElement("nav",{className:"navBarMain"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(d.b,{to:"/",onClick:this.props.resetAllProps},"Home")))))}}]),t}(r.a.Component)),f=(a(39),function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;console.log("===FilterResult===",this.props.filterResultProps);var t=this.props.filterResultProps.map(function(t,a){return r.a.createElement(r.a.Fragment,{key:a},r.a.createElement("div",{className:"searchResultList"},r.a.createElement("p",{className:"addressColor"},"Address: "),r.a.createElement("p",null,t.address),r.a.createElement("button",{className:"resultBtn",onClick:function(){return e.props.checkAvailabiltyHandlerProps(t,a)}},"Check Availablity")))});return r.a.createElement("div",null,r.a.createElement("h1",{className:"resultHeader"},"Search Result"),t)}}]),t}(r.a.Component));a(40);var b=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).getLatLong=a.getLatLong.bind(Object(m.a)(Object(m.a)(a))),a.initMap=a.initMap.bind(Object(m.a)(Object(m.a)(a))),a.renderMap=a.renderMap.bind(Object(m.a)(Object(m.a)(a))),a.state={myLat:null,myLon:null},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getLatLong()}},{key:"getLatLong",value:function(e){var t=this,a="https://developers.onemap.sg/commonapi/convert/3414to4326?X="+parseInt(this.props.singleCarParkProps.x_coord)+"&Y="+parseInt(this.props.singleCarParkProps.y_coord);console.log("GETLATLONG"),fetch(a,{method:"GET"}).then(function(e){return e.json()}).then(function(e){t.setState({myLat:e.latitude,myLon:e.longitude}),console.log("MYLAT",t.state.myLat),console.log("MYLON",t.state.myLon),t.renderMap()})}},{key:"renderMap",value:function(){!function(e){var t=window.document.getElementsByTagName("script")[0],a=window.document.createElement("script");a.src=e,a.async=!0,a.defer=!0,t.parentNode.insertBefore(a,t)}("https://maps.googleapis.com/maps/api/js?key=AIzaSyCoyQTMWR5dEOWmtHhp6_4KIFfB4KkTTWU&callback=initMap"),window.initMap=this.initMap}},{key:"initMap",value:function(){console.log("initMapx",this.props.myLatProps),console.log("initMapY",this.props.myLonProps);var e=new window.google.maps.Map(document.getElementById("map"),{center:{lat:this.state.myLat,lng:this.state.myLon},zoom:18});new window.google.maps.Marker({position:{lat:this.state.myLat,lng:this.state.myLon},map:e,title:this.props.singleCarParkProps.address})}},{key:"render",value:function(){var e=r.a.createElement("p",null,"Loading...");if(Object.keys(this.props.finalResultProps).length<1)return e;e="",console.log("singlecarpark",this.props.singleCarParkProps),console.log(this.props.finalResultProps,"carparkresult");var t=this.props.singleCarParkProps,a=this.props.finalResultProps.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("span",{className:"titleHightlight"},"Lot Type:")," ",e.carpark_info[0].lot_type,r.a.createElement("br",null),r.a.createElement("span",{className:"titleHightlight"},"Total Lot:")," ",e.carpark_info[0].total_lots," ",r.a.createElement("br",null),r.a.createElement("span",{className:"titleHightlight"},"Lot Available:")," ",e.carpark_info[0].lots_available)});return r.a.createElement("div",{className:"carParkResult"},e,r.a.createElement("h2",null,"Car Park Search Result"),r.a.createElement("h3",null,t.address),r.a.createElement("p",null,r.a.createElement("span",{className:"titleHightlight"},"Car Park Type:")," ",t.car_park_type,r.a.createElement("br",null),r.a.createElement("span",{className:"titleHightlight"},"Free Parking:"),"  ",t.free_parking,r.a.createElement("br",null),r.a.createElement("span",{className:"titleHightlight"},"Parking System:")," ",t.type_of_parking_system),r.a.createElement("ul",null,a),r.a.createElement("div",{id:"map"}))}}]),t}(r.a.Component),k=(a(41),function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"footerDiv"},r.a.createElement("h3",null,this.props.messageProps))}}]),t}(r.a.Component)),y=a(11),E=(a(42),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).onChangeHandle=a.onChangeHandle.bind(Object(m.a)(Object(m.a)(a))),a.onSubmitHandler=a.onSubmitHandler.bind(Object(m.a)(Object(m.a)(a))),a.checkAvailabiltyHandler=a.checkAvailabiltyHandler.bind(Object(m.a)(Object(m.a)(a))),a.state={message:"",searchInput:"",searchDisplay:!1,result:[],filterResult:[],carParks:[],finalResult:[],singleCarPark:null},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"onChangeHandle",value:function(e){this.setState({searchInput:e.target.value})}},{key:"onSubmitHandler",value:function(e){var t=this;e.preventDefault();var a=this;console.log("onSubmitHandler",this.state.searchInput);fetch("https://data.gov.sg/api/action/datastore_search?resource_id=139a3035-e624-4f56-b63f-89ae28d4ae4c&q="+this.state.searchInput.toLowerCase()).then(function(e){return e.json()}).then(function(e){console.log("FETCH",e.result.records),a.setState({result:e.result.records,searchDisplay:!1});var n=t.state.result.filter(function(e){return e.address.toLowerCase().includes(t.state.searchInput.toLowerCase())});n.length<1||void 0===n?a.setState({message:"Address Not Found, Please Try Again."}):(a.setState({filterResult:n,searchDisplay:!0,message:""}),console.log("AFTER FILTER",t.state.filterResult))}).catch(function(e){console.log(e),a.setState({message:e})})}},{key:"checkAvailabiltyHandler",value:function(e,t){var a=this;this.setState({singleCarPark:e});var n=this,r=(new Date).toISOString();console.log("mydate",r),fetch("https://api.data.gov.sg/v1/transport/carpark-availability?"+r,{method:"GET"}).then(function(e){return e.json()}).then(function(r){console.log("===",r.items[0].carpark_data),n.setState({carParks:r.items[0].carpark_data});var s=a.state.carParks.filter(function(t){return t.carpark_number===e.car_park_no});s.length<1||void 0===s?n.setState({message:"Car Park Not Found, Try Searching Again"}):n.setState({finalResult:s,message:""}),console.log("SearchCarPark",s),console.log("Check Availabilty index",t,e.car_park_no)}).catch(function(e){console.log(e)})}},{key:"resetAll",value:function(e){e.prevent.default(),this.setState({message:"",searchDisplay:!1,result:[],filterResult:[],carParks:[],finalResult:[],singleCarPark:null})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(d.a,{basename:"/parking-react-app"},this.state.searchDisplay&&r.a.createElement(g,{resetAllProps:this.resetAll}),r.a.createElement("main",null,r.a.createElement(y.d,null,0!==Object.keys(this.state.finalResult).length&&r.a.createElement(y.a,{from:"/result",to:"/carparkresult",exact:!0}),!this.state.singleCarPark&&r.a.createElement(y.a,{from:"/carparkresult",to:"/"}),!this.state.searchDisplay&&r.a.createElement(y.a,{from:"/result",to:"/",exact:!0}),this.state.searchDisplay&&r.a.createElement(y.a,{from:"/",to:"/result",exact:!0}),r.a.createElement(y.b,{exact:!0,path:"/result",render:function(){return r.a.createElement(f,{filterResultProps:e.state.filterResult,checkAvailabiltyHandlerProps:e.checkAvailabiltyHandler})}}),r.a.createElement(y.b,{exact:!0,path:"/carparkresult",render:function(){return r.a.createElement(b,{finalResultProps:e.state.finalResult,singleCarParkProps:e.state.singleCarPark})}}),r.a.createElement(y.b,{exact:!0,path:"/",render:function(){return r.a.createElement(h,{onChangeHandlerProps:e.onChangeHandle,searchInputProps:e.state.searchInput,onSubmitHandlerProps:e.onSubmitHandler})}}))),r.a.createElement(k,{messageProps:this.state.message})))}}]),t}(n.Component));l.a.render(r.a.createElement(E,null),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.a9faaf0d.chunk.js.map